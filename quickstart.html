<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Quickstart &#8212; NTDMC inference pipeline  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Overview" href="workflow_description.html" />
    <link rel="prev" title="Required software" href="install.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this heading">¶</a></h1>
<section id="starting-dataset">
<h2>Starting dataset<a class="headerlink" href="#starting-dataset" title="Permalink to this heading">¶</a></h2>
<p>Our starting point is statistical data about the prevalence of
trachoma at several locations across Ethiopia, Nigeria, Uganda,
Burkina Faso, Tanzania, Cameroon and Senegal.  Each location is
refered to as an <em>Implementation Unit (IU)</em> and is uniquely described
by a IU code (e.g. ETH18538 or SEN40173).  Prevalence statistics are
given after several rounds of <em>Mass Drug Application</em>, described in
the starting data file.  In this case, MDAs are carried yearly between
values indicated in columns <code class="docutils literal notranslate"><span class="pre">start_MDA</span></code> and <code class="docutils literal notranslate"><span class="pre">last_MDA</span></code>.</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">¶</a></h2>
<p>Pipeline parameters can be set by editing the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file.
For the purpose of this fast-paced introduction the only parameters we
are concerned with are</p>
<dl class="simple">
<dt>data</dt><dd><p>Location of the dataset, relative to the workflow file (<code class="docutils literal notranslate"><span class="pre">Snakefile</span></code>).</p>
</dd>
<dt>end_sim_year</dt><dd><p>Model simulation end year.</p>
</dd>
<dt>nsamples_beta</dt><dd><p>Number of parameter values to simulate.</p>
</dd>
</dl>
</section>
<section id="executing-the-workflow">
<h2>Executing the workflow<a class="headerlink" href="#executing-the-workflow" title="Permalink to this heading">¶</a></h2>
<p>The pipeline generates $N$ output from NTDMC trachoma model (disease
infection and prevalence) for an ensemble of $N$ epidemiological
parameter values, for each IU in the dataset, simulated up to an
arbitrary (user-defined) final year.  The number of simulated
parameter values per IU is also user defined.</p>
<p>Simulation output can be generated for a single IU or a set of IUs:</p>
<p>Single IU:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>snakemake<span class="w"> </span>--cores<span class="w"> </span><span class="m">1</span><span class="w"> </span>--use-conda<span class="w"> </span>--conda-frontend<span class="w"> </span>conda<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>results/infection_SEN40173.csv
</pre></div>
</div>
<p>Multiple IUs</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>snakemake<span class="w"> </span>--cores<span class="w"> </span><span class="m">1</span><span class="w"> </span>--use-conda<span class="w"> </span>--conda-frontend<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>results/infection_<span class="o">{</span>ETH18587,ETH18542,TZA46580<span class="o">}</span>.csv
</pre></div>
</div>
<p>Alternatively, simulationp output can generated for all IUs in the
dataset with:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>snakemake<span class="w"> </span>--cores<span class="w"> </span><span class="m">1</span><span class="w"> </span>--use-conda<span class="w"> </span>--conda-frontend<span class="w"> </span>conda
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--use-conda</span></code> and <code class="docutils literal notranslate"><span class="pre">--conda-frontend</span></code> options enable the
automatic creation and activation of conda environments. See
<a class="reference external" href="https://snakemake.readthedocs.io/en/stable/snakefiles/deployment.html#integrated-package-management">(Snakemake)Integrated Package Management</a>.
Should you choose to manage the installation the required workflow
dependencies yourself (see <a class="reference internal" href="install.html#required-software"><span class="std std-ref">Required software</span></a>), both options
can be ommitted.</p>
</div>
</section>
<section id="partial-execution">
<h2>Partial execution<a class="headerlink" href="#partial-execution" title="Permalink to this heading">¶</a></h2>
<p>The workflow generates a number of intermediate results.  For
instance, you can ask snakemake to generate the sampled parameter
values.</p>
<dl class="simple">
<dt>snakemake –cores 1 –use-conda –conda-frontend </dt><dd><p>results/sampled_parameters_{ETH18587,ETH18542,TZA46580}.csv</p>
</dd>
</dl>
<p>In this case, the workflow execution will stop at the generation of
the parameter values, and will not carry on with the model
simulation. See <span class="xref std std-ref">Worflow results</span> for a list of all available
workflow results.</p>
</section>
<section id="specifying-workflow-parameters-at-the-command-line">
<h2>Specifying workflow parameters at the command line<a class="headerlink" href="#specifying-workflow-parameters-at-the-command-line" title="Permalink to this heading">¶</a></h2>
<p>Parameter values specified in the configuration file (<code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>)
can be overriden using the <code class="docutils literal notranslate"><span class="pre">--config</span></code> option:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>snakemake<span class="w"> </span>--cores<span class="w"> </span><span class="m">1</span><span class="w"> </span>--use-conda<span class="w"> </span>--conda-frontend<span class="w"> </span>conda<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--config<span class="w"> </span><span class="nv">nsamples_beta</span><span class="o">=</span><span class="m">100</span>
</pre></div>
</div>
<p>A specific configuration file can also be specified, instead of the
default <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>snakemake<span class="w"> </span>--cores<span class="w"> </span><span class="m">1</span><span class="w"> </span>--use-conda<span class="w"> </span>--conda-frontend<span class="w"> </span>conda<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--configfile<span class="w"> </span>my/other/configfile.yaml
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">NTDMC inference pipeline</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Required software</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#starting-dataset">Starting dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#executing-the-workflow">Executing the workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#partial-execution">Partial execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#specifying-workflow-parameters-at-the-command-line">Specifying workflow parameters at the command line</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="workflow_description.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="guides/index.html">System-specific guides</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="install.html" title="previous chapter">Required software</a></li>
      <li>Next: <a href="workflow_description.html" title="next chapter">Overview</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Thibault Lestang.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/quickstart.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>